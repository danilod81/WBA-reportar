<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reporte de Problema de mantenimiento</title>
  <style>
    :root{
      --bg:#f3f4f6; --card:#ffffff; --text:#111827; --muted:#6b7280;
      --primary:#2563eb; --primary-hover:#1d4ed8; --border:#e5e7eb;
      --shadow:0 8px 30px rgba(0,0,0,.08);
    }
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);line-height:1.5}
    /* Header */
    .hero{
      position:relative; height:240px; display:grid; place-items:center; text-align:center;
      background:url("header.jpg") center/cover no-repeat;
    }
    .hero::after{content:""; position:absolute; inset:0; background:rgba(0,0,0,.45)}
    .hero-content{position:relative; z-index:1; color:#fff}
    .hero h1{margin:0;font-size:2.2rem;font-weight:800}
    .hero h2{margin-top:10px;font-size:1.2rem;font-weight:500;opacity:.95}
    /* Card */
    .wrap{max-width:760px;margin:-50px auto 40px;padding:0 16px}
    .card{
      background:var(--card); border-radius:20px; box-shadow:var(--shadow);
      padding:32px 28px;
    }
    label{display:block;margin:28px 0 10px;font-weight:600;font-size:.95rem;color:var(--text)}
    textarea,input[type="file"]{
      width:100%;padding:14px 16px;border:1px solid var(--border);border-radius:14px;
      background:#fff;font-size:1rem;transition:.2s
    }
    textarea{min-height:160px;resize:vertical}
    textarea:focus,input[type="file"]:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.15);outline:none}
    button{
      margin-top:28px;width:100%;padding:16px;border:0;border-radius:14px;
      background:var(--primary);color:#fff;font-size:1rem;font-weight:600;cursor:pointer;
      transition:.2s box-shadow, .2s background;
      box-shadow:0 6px 18px rgba(37,99,235,.3);
    }
    button:hover{background:var(--primary-hover)}
    .muted{color:var(--muted);font-size:.9rem;margin-top:14px;text-align:center}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="hero">
    <div class="hero-content">
      <h1>Reporte de Problema de mantenimiento</h1>
      <h2 id="direccionDepto">Dirección del departamento</h2>
    </div>
  </header>

  <!-- Form -->
  <main class="wrap">
    <div class="card">
      <form id="form" method="POST" action="https://optimaltm.app.n8n.cloud/webhook/wba-reporte-mantenimiento" enctype="multipart/form-data" novalidate>
        
        <!-- Hidden depto -->
        <input type="hidden" id="departamento" name="departamento" />

        <label for="descripcion">Detalle del problema *</label>
        <textarea id="descripcion" name="descripcion" required placeholder="Contanos qué pasó, dónde y desde cuándo…"></textarea>

        <label for="media">Adjuntar foto o video *</label>
        <input id="media" name="media" type="file" accept="image/*,video/*" capture required />

        <button type="submit">Enviar reporte</button>
        <div id="status" class="muted" role="status" aria-live="polite"></div>
      </form>
    </div>
  </main>

  <p class="muted">Tip: en Android, “foto/video” suele abrir cámara o galería. Para videos largos (>20 MB) consultá soporte.</p>

  <script>
    // Autocompletar dirección en el header y en hidden
    const qs = new URLSearchParams(location.search);
    const depQS = (qs.get('departamento') || '').trim();
    if (depQS) {
      document.getElementById('departamento').value = depQS;
      document.getElementById('direccionDepto').textContent = depQS;
    }

    // Validación rápida
    document.getElementById('form').addEventListener('submit', (e) => {
      const desc = document.getElementById('descripcion').value.trim();
      const file = document.getElementById('media').files[0];
      if (!desc || !file) {
        e.preventDefault();
        document.getElementById('status').textContent = 'Completá descripción y adjuntá una foto o video.';
      } else {
        document.getElementById('status').textContent = 'Enviando…';
      }
    });
  </script>
</body>
</html>
